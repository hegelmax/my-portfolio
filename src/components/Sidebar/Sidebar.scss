@use "../../styles" as *;

/* ============================
   SIDEBAR
============================ */

#sidebar {
  width: 25%;
  max-width: 150px;
  overflow: visible;
  position: sticky;
  top: 20px;
  align-self: flex-start;
  transition: padding 0.3s ease;

  .sidebar-inner {
    padding-right: 30px;
    position: relative;
    padding-top: 20px;
    transition: padding 0.3s ease;
  }

  .logo {
    display: inline-block;
    margin-bottom: 30px;
    padding: 0;
    border: none;
    transition: transform 0.25s ease, margin 0.25s ease;

    img {
      display: block;
      width: 50px;
      height: auto;
      transition: transform 0.25s ease, width 0.25s ease;
    }
  }

  &.is-sticky {
    top: 10px;

    .sidebar-inner {
      padding-top: 10px;

    }

    nav {
      padding: 10px 0px 10px;
    }

    .logo {
      margin-bottom: 0px;

      img {
        width: 40px;
        transform: translateY(-2px);
      }
    }
  }

  /* ============================
     NAVIGATION
  ============================= */

  nav {
    padding: 25px 0 10px;
    color: var(--color-text-main);

    ul {
      list-style: none;
      margin: 0;
      padding: 0;

      li {
        /* Base links */
        a,
        span {
          display: inline-block;
          padding: 6px 0;
          color: var(--color-text-main);
          text-decoration: none;
          border: none;
          font-weight: 300;
          transition: color 100ms;

          &.current {
            color: var(--color-accent);
          }

          &:hover {
            color: var(--color-accent);
            cursor: pointer;

            &::before {
              background-color: var(--color-accent);
            }
          }

          .nav-external-icon {
            display: inline-block;
            font-size: 13px;
            margin-left: 4px;
            vertical-align: text-top;
          }
        }

        /* ============================
           DROPDOWN LOGIC
        ============================= */

        &.dropdown {
          span {
            position: relative;

            /* Plus / cross icon */
            &::after,
            &::before {
              content: '';
              position: absolute;
              top: 2px;
              right: 0;
              bottom: 0;
              margin: auto -13px auto auto;
              display: inline-block;
              width: 7px;
              height: 1px;
              background-color: var(--color-text-main);
              transition: background-color 100ms, transform 200ms;
            }

            &::before {
              margin-right: -10px;
              width: 1px;
              height: 7px;
            }

            &.current::after,
            &.current::before,
            &:hover::after,
            &:hover::before {
              background-color: var(--color-accent);
            }
          }

          /* Hidden submenu */
          ul {
            display: none;

            li {
              transform: translateY(-10px);

              a {
                font-size: 13px;

                &::before {
                  content: '';
                  display: inline-block;
                  width: 4px;
                  height: 1px;
                  background-color: var(--color-text-main);
                  margin-bottom: 4px;
                  margin-right: 6px;
                  transition: background-color 100ms;
                }

                &.current::before,
                &:hover::before {
                  background-color: var(--color-accent);
                }
              }
            }
          }

          /* Expanded submenu */
          &.expanded {
            span::before {
              transform: rotate(90deg);
            }

            ul {
              display: block;

              li {
                transform: translateY(0);
                opacity: 1;
              }

              /* Staggered delay for each item */
              @for $i from 1 through 10 {
                li:nth-child(#{$i}) {
                  transition:
                    opacity 200ms #{$i * 100}ms,
                    transform 200ms #{$i * 100}ms;
                }
              }
            }
          }
        }
      }
    }
  }

  /* ============================
     COPYRIGHT
  ============================= */

  .copyright {
    padding-top: 20px;
    color: var(--color-text-caption);
    font-size: 13px;
  }

  /* ============================
     MOBILE
  ============================= */

  @media (max-width: 820px) {
    display: none;
    width: 100%;
    text-align: center;

    .sidebar-inner {
      padding-right: 0;
    }

    .logo {
      margin-bottom: 15px;
    }

    .intro {
      border-bottom: 1px dashed var(--color-border-input);
      padding-bottom: 20px;
    }

    nav {
      padding: 15px 0 10px;

      ul {
        li {
          display: inline-block;
          margin: 0 5px;

          &.dropdown {
            position: relative;
            margin-right: 17px;

            ul {
              position: absolute;
              margin-top: 5px;
              background-color: var(--color-bg-body);
              padding: 0 15px;
              box-shadow: 0 0 10px 5px var(--shadow-subtle);
              text-align: left;
              z-index: 10;

              li {
                display: block;

                &:first-child {
                  padding-top: 10px;
                }

                &:last-child {
                  padding-bottom: 10px;
                }

                a {
                  display: block;
                }
              }
            }
          }
        }
      }
    }

    .copyright {
      display: none;
    }

    .widgets-block {
      .widget {
        margin: 30px 0 50px;

        .title {
          &::after {
            display: none;
          }
        }

        ul {
          li {
            display: inline-block;
            margin: 0 5px;
          }
        }
      }
    }
  }
}
